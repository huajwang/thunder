<div class="container">
  @if (restaurant(); as rest) {
    <header class="restaurant-header">
      @if (rest.imageUrl) {
        <img [src]="rest.imageUrl" [alt]="rest.name" class="header-bg">
      }
      <div class="header-overlay">
        <div class="header-content">
          <div>
            <h1>{{ rest.name }}</h1>
            <p>{{ rest.description }}</p>
          </div>
          <div class="header-actions">
            @if (isVipEnabled() && !cartService.customerInfo()?.isMember && !cartService.hasVipItem()) {
              <button mat-raised-button color="accent" class="vip-button" 
                [routerLink]="['/', rest.slug, 'vip']"
                [queryParams]="currentTable() ? { table: currentTable() } : {}">
                <mat-icon>star</mat-icon> Join VIP
              </button>
            }
          </div>
        </div>
      </div>
    </header>
  }

  <div class="menu-layout">
    <!-- Sidebar -->
    <aside class="category-sidebar">
      <h2 class="sidebar-title">Categories</h2>
      <ul class="category-list">
        @for (category of categories(); track category.id) {
          <li 
            [class.active]="selectedCategory()?.id === category.id"
            (click)="selectCategory(category)">
            {{ category.name }}
          </li>
        }
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="items-content">
      @if (selectedCategory(); as category) {
        <div class="items-grid">
          @for (item of category.items; track item.id) {
            <div class="menu-item-card">
              @if (item.imageUrl) {
                <img [src]="item.imageUrl" [alt]="item.name" class="item-image">
              }
              <div class="menu-item-content">
                <div class="item-details">
                  <h3>{{ item.name }}</h3>
                  <p class="item-desc">{{ item.description }}</p>
                  @if (restaurant()?.type !== 'AYCE') {
                    <span class="item-price">${{ item.price.toFixed(2) }}</span>
                  }
                </div>
                <div class="item-actions">
                  @if (item.spicinessLevel) {
                    <div class="spiciness-badge" [title]="'Spiciness level ' + item.spicinessLevel">
                      @for (_ of getSpicinessArray(item.spicinessLevel); track $index) {
                        <mat-icon class="spicy-icon">whatshot</mat-icon>
                      }
                    </div>
                  }
                  <button mat-mini-fab color="primary" (click)="addToOrder(item)">
                    <mat-icon>add</mat-icon>
                  </button>
                </div>
              </div>
            </div>
          }
        </div>
      }
    </main>
  </div>
</div>
